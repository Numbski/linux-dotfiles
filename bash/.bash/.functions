#!/bin/bash

# LAMP
# -----------------------------------------------------------------------------


localhost-restart () {
    echo "Restarting MySQL"
    sudo service mysql stop
    sudo service mysql start

    echo "Restarting Apache"
    sudo service apache2 stop
    sudo service apache2 start
}


# PHP
# -----------------------------------------------------------------------------

phpswap () {
    local IS_PHP5=`php --version | grep "PHP 5"`

    if [[ -z $IS_PHP5 ]]; then
        echo "Changing to PHP 5.6"
        sudo ln -sf /usr/bin/php5.6 /etc/alternatives/php
    else
        echo "Changing to PHP 7.1"
        sudo ln -sf /usr/bin/php7.1 /etc/alternatives/php
    fi
}


# CLEANUP TOOLS
# -----------------------------------------------------------------------------

cleanup () {
    local DIRECTORY=${1:-"."}

    echo "Cleaning up .DS_Store files"
    find $DIRECTORY -name '*.DS_Store' -type f -ls -delete
    echo "Cleaning up .fuse_hidden files"
    find $DIRECTORY -name '.fuse_hidden*' -type f -ls -delete
}


# BACKUP TOOLS
# -----------------------------------------------------------------------------

download_development_media () {
    rsync -ravzP "$1"@development:~/project/website/public/media public
}

download_development_snippets () {
    rsync -ravzP "$1"@development:~/project/website/app/views/snippet app/views
}

download_master_media () {
    rsync -ravzP "$1"@master:~/project/website/public/media public
}

download_master_snippets () {
    rsync -ravzP "$1"@master:~/project/website/app/views/snippet app/views
}
